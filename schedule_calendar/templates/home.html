{% load widget_tweaks %}
<html lang='en'>
   <head>
      <meta charset='utf-8' />
      <!-- Bootstrap CSS -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
         integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
      <!-- jquery -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <!-- full calendar -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.9.0/main.min.css">
      <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.9.0/main.min.js"></script>
      <script>
         document.addEventListener('DOMContentLoaded', function () {
           var calendarEl = document.getElementById('calendar');
           
           console.log({{tasks|safe}})
           var calendar = new FullCalendar.Calendar(calendarEl, {
             themeSystem: 'bootstrap',
             locale: 'pt-br',
             firstDay: 0,
             height: 'auto',
             initialView: 'dayGridMonth',
             eventSources: [
                 {{tasks|safe}}
              ]
           });
           calendar.render();
         });
      </script>
   </head>
   <body>
      <div class="container-fluid">
         <div class="row">
            <div id="calendar" class="d-none d-md-flex col-md-4 col-lg-8 p-3"></div>
            <div class="col-md-8 col-lg-4" id="containerForSlideMenu">
               <div class="login d-flex py-3">
                  <div class="container">
                     <div class="row">
                        <div class="col-lg-12">
                           <div class="row my-2">
                              <div class="col-md-9">
                                 <h1 class="login-heading mb-4 my-auto">MyCalendar App</h1>
                              </div>
                           </div>
                           <div class="tab-content">
                              <div class="tab-pane fade show active" role="tabpanel" aria-labelledby="mycalendars-tab">
                                 <div class="row mt-3">
                                    <div class=" col-md-12">
                                       <h4>Criar evento</h4>
                                       <form method="post" class="mt-3">
                                          {% csrf_token %}
                                          <div class="form-group">
                                             <label for="id_name_event">Nome da tarefa:</label>
                                             {% render_field task_create_form.name class="form-control" id="id_name_event" %}
                                             {{ task_create_form.name.errors }}
                                          </div>
                                          <div class="form-group">
                                             <label for="id_start_date">Data de in√≠cio da tarefa:</label>
                                             {% render_field task_create_form.start_date class="form-control" type="datetime-local" %}
                                             {{ task_create_form.start_date.errors }}
                                          </div>
                                          <div class="form-group">
                                             <label for="id_end_date">Data do fim da tarefa:</label>
                                             {% render_field task_create_form.end_date class="form-control" type="datetime-local" %}
                                             {{ task_create_form.end_date.errors }}
                                          </div>
                                          <div class="d-flex justify-content-center">
                                             <button class="btn btn-lg btn-primary btn-group btn-login font-weight-bold mb-2"
                                                type="submit" name="action" value="create_event">Criar evento</button>
                                          </div>
                                       </form>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>